{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","js/Clock.js","js/Emitter.js","js/Parallax.js","js/ScrollEmitter.js","js/index.js"],"names":[],"mappings":"AAAA;;;;;;;;;ACAA;;;;;;;;;;;;IAEM,K;;;AACF,qBAAc;AAAA;;AAAA;;AAGV,cAAK,OAAL,GAAe,KAAf;AACA,cAAK,QAAL,GAAgB,KAAhB;AACA,cAAK,UAAL;AACA,cAAK,KAAL,GAAa,MAAK,KAAL,CAAW,IAAX,OAAb;AANU;AAOb;;;;8BAEM,S,EAAY;AACf,iBAAK,QAAL,GAAgB,KAAhB;;AAEA,iBAAK,OAAL,CAAc,QAAd;AACA,iBAAK,OAAL,CAAc,MAAd,EAAsB,SAAtB;;AAEA,gBAAI,KAAK,OAAL,CAAa,MAAjB,EAA0B;AACtB,qBAAK,IAAL,GAAY,sBAAuB,KAAK,KAA5B,CAAZ;AACH,aAFD,MAEO;AACH,qBAAK,IAAL;AACH;AACJ;;;uCAEc;AACX,gBAAI,CAAC,KAAK,QAAV,EAAqB;AACjB,qBAAK,IAAL,GAAY,sBAAuB,KAAK,KAA5B,CAAZ;AACH;;AAED,iBAAK,QAAL,GAAgB,IAAhB;AACH;;;gCAEO;AACJ,iBAAK,OAAL,GAAe,IAAf;AACA,iBAAK,YAAL;AACH;;;+BAEM;AACH,iBAAK,OAAL,GAAe,KAAf;AACA,iCAAsB,KAAK,IAA3B;AACH;;;;;;AACJ;;kBAEc,K;;;;;;;;;;;;;;;IC5CT,O;AACF,uBAAc;AAAA;;AACV,aAAK,OAAL,GAAe,EAAf;AACH;;;;kCAEU,S,EAAY;AACnB,mBAAO,aAAa,KAAK,OAAzB;AACH;;;2BAEG,S,EAAW,Q,EAAW;AACtB,gBAAI,KAAK,SAAL,CAAgB,SAAhB,CAAJ,EAAkC;AAC9B,qBAAK,OAAL,CAAa,SAAb,EAAwB,IAAxB,CAA8B,QAA9B;AACH,aAFD,MAEO;AACH,qBAAK,OAAL,CAAa,SAAb,IAA0B,CAAE,QAAF,CAA1B;AACH;;AAED,mBAAO,IAAP;AACH;;;6BAEK,S,EAAW,Q,EAAW;AACxB,iBAAK,EAAL,CAAS,SAAT,EAAoB,EAAE,IAAI,QAAN,EAApB;AACH;;;4BAEI,S,EAAW,Q,EAAW;AACvB,gBAAI,CAAC,KAAK,SAAL,CAAgB,SAAhB,CAAL,EAAmC;AAC/B,uBAAO,IAAP;AACH;;AAED,gBAAM,QAAQ,KAAK,OAAL,CAAa,SAAb,EAAwB,OAAxB,CAAiC,QAAjC,CAAd;;AAEA,gBAAI,SAAS,CAAb,EAAiB;AACb,qBAAK,OAAL,CAAa,SAAb,EAAwB,MAAxB,CAAgC,KAAhC,EAAuC,CAAvC;AACH;AACJ;;;gCAEQ,S,EAAW,I,EAA4B;AAAA;;AAAA,gBAAtB,QAAsB,yDAAX,YAAM,CAAE,CAAG;;AAC5C,gBAAI,CAAC,KAAK,SAAL,CAAgB,SAAhB,CAAL,EAAmC;AAC/B;AACH;;AAED,iBAAK,OAAL,CAAa,SAAb,EAAwB,GAAxB,CAA6B,UAAE,QAAF,EAAY,GAAZ,EAAqB;AAC9C,oBAAI,QAAO,QAAP,yCAAO,QAAP,OAAoB,QAAxB,EAAmC;AAC/B,6BAAS,EAAT,CAAa,IAAb;AACA,0BAAK,OAAL,CAAa,SAAb,EAAwB,MAAxB,CAAgC,GAAhC,EAAqC,CAArC;AACH,iBAHD,MAGO;AACH,6BAAU,IAAV;AACH;AACJ,aAPD;;AASA;AACH;;;;;;AACJ;;kBAEc,O;;;;;;;;;;;ACrDf;;;;AACA;;;;;;;;IAEM,Q;AACF,4BAAwC;AAAA,YAAzB,QAAyB,QAAzB,QAAyB;AAAA,YAAf,KAAe,QAAf,KAAe;AAAA,YAAR,GAAQ,QAAR,GAAQ;;AAAA;;AACpC,aAAK,MAAL,GAAc,KAAd;AACA,aAAK,IAAL,GAAY,GAAZ;AACA,aAAK,cAAL;AACA,aAAK,QAAL,GAAgB,KAAhB;AACA,aAAK,SAAL,GAAiB,QAAjB;;AAEA,eAAO,KAAP,GAAe,OAAO,KAAP,IAAgB,qBAA/B;AACA,eAAO,aAAP,GAAuB,OAAO,aAAP,IAAwB,6BAA/C;;AAEA,aAAK,SAAL,GAAiB,KAAK,SAAL,CAAe,IAAf,CAAqB,IAArB,CAAjB;AACA,aAAK,SAAL,GAAiB,KAAK,SAAL,CAAe,IAAf,CAAqB,IAArB,CAAjB;AACA,aAAK,OAAL,GAAe,KAAK,OAAL,CAAa,IAAb,CAAmB,IAAnB,CAAf;;AAEA,eAAO,aAAP,CAAqB,EAArB,CAAyB,QAAzB,EAAmC,KAAK,SAAxC;AACH;;;;yCAEgB;AACb;AACA,iBAAK,YAAL,GAAoB,OAAO,WAAP,IAAsB,OAAO,WAAjD;AACA;AACA;AACA,iBAAK,KAAL,GAAa,CAAb;AACA,iBAAK,GAAL,GAAW,CAAX;AACH;;;kCAEU,M,EAAS;AAChB,iBAAK,OAAL,GAAe,MAAf;;AAEA,gBAAI,KAAK,OAAL,EAAJ,EAAqB;;AAEjB,oBAAI,CAAC,OAAO,KAAP,CAAa,OAAlB,EAA4B;AACxB,2BAAO,KAAP,CAAa,KAAb;AACH;;AAED,oBAAI,CAAC,KAAK,QAAV,EAAqB;AACjB,2BAAO,KAAP,CAAa,IAAb,CAAmB,QAAnB,EAA6B,KAAK,SAAlC;AACA,2BAAO,KAAP,CAAa,IAAb,CAAmB,MAAnB,EAA2B,KAAK,OAAhC;;AAEA,yBAAK,QAAL,GAAgB,IAAhB;AACH;AACJ;AACJ;;;oCAEW;AACR;AACA,iBAAK,QAAL,GAAkB,KAAK,KAAL,GAAe,CAAE,KAAK,GAAL,GAAW,KAAK,KAAlB,KAA8B,KAAK,IAAL,GAAY,KAAK,MAA/C,CAAF,IAAgE,KAAK,OAAL,GAAe,KAAK,MAApF,CAA/B;AACH;;;gCAEQ,S,EAAY;AACjB;AACA,iBAAK,SAAL,CAAgB,KAAK,QAArB;AACA,iBAAK,QAAL,GAAgB,KAAhB;AACH;;;kCAES;AACN,mBAAS,KAAK,OAAL,GAAe,KAAK,YAApB,IAAoC,KAAK,MAA3C,IAAyD,KAAK,OAAL,IAAgB,KAAK,IAArF;AACH;;;;;;AACJ;;kBAEc,Q;;;;;;;;;;;AChEf;;;;;;;;;;;;IAEM,a;;;AACF,6BAAc;AAAA;;AAAA;;AAEV,cAAK,SAAL,GAAiB,MAAK,SAAL,CAAe,IAAf,OAAjB;AACA,cAAK,mBAAL;AAHU;AAIb;;;;oCAEW;AACR,iBAAK,OAAL,CAAc,QAAd,EAAwB,OAAO,OAA/B;AACH;;;8CAEqB;AAClB,mBAAO,gBAAP,CAAyB,QAAzB,EAAmC,KAAK,SAAxC,EAAmD,KAAnD;AACH;;;;;;AACJ;;kBAEc,a;;;;;;;AClBf;;;;;;;;AAEA,IAAM,OAAS,YAAM;AACjB,WAAO;AACH,0BAAkB,4BAAM;AACpB,gBAAM,YAAY,CAAlB;AACA,gBAAM,UAAU,CAAC,IAAjB;AACA,gBAAM,cAAc,CAApB;AACA,gBAAM,YAAY,CAAC,IAAnB;AACA,gBAAM,YAAY,CAAlB;AACA,gBAAM,UAAU,CAAC,IAAjB;;AAEA,gBAAI,iBAAJ;AACA,gBAAI,iBAAJ;AACA,gBAAI,mBAAJ;;AAEA,gBAAM,YAAY,GAAG,KAAH,CAAS,KAAT,CAAgB,SAAS,gBAAT,CAA2B,4BAA3B,CAAhB,CAAlB;AACA,gBAAM,cAAc,GAAG,KAAH,CAAS,KAAT,CAAgB,SAAS,gBAAT,CAA2B,8BAA3B,CAAhB,CAApB;AACA,gBAAM,YAAY,GAAG,KAAH,CAAS,KAAT,CAAgB,SAAS,gBAAT,CAA2B,4BAA3B,CAAhB,CAAlB;AACA,gBAAM,OAAO,EAAb;AACA,gBAAM,SAAS,EAAf;AACA,gBAAM,OAAO,EAAb;;AAjBoB,gBAmBd,YAnBc;AAoBhB,sCAAa,IAAb,EAAoB;AAAA;;AAChB,yBAAK,KAAL,GAAa,IAAb;AACA,yBAAK,MAAL,GAAc,KAAK,KAAL,CAAW,KAAzB;AACH;;AAvBe;AAAA;AAAA,2CAyBR,GAzBQ,EAyBF;AACV,6BAAK,MAAL,CAAY,SAAZ,wBAA4C,IAAI,OAAJ,CAAa,CAAb,CAA5C;AACH;AA3Be;;AAAA;AAAA;;AA4BnB;;AAED,sBAAU,GAAV,CAAe,UAAE,IAAF,EAAY;AACvB,qBAAK,IAAL,CAAW,IAAI,YAAJ,CAAkB,IAAlB,CAAX;AACH,aAFD;;AAIA,wBAAY,GAAZ,CAAiB,UAAE,IAAF,EAAY;AACzB,uBAAO,IAAP,CAAa,IAAI,YAAJ,CAAkB,IAAlB,CAAb;AACH,aAFD;;AAIA,sBAAU,GAAV,CAAe,UAAE,IAAF,EAAY;AACvB,qBAAK,IAAL,CAAW,IAAI,YAAJ,CAAkB,IAAlB,CAAX;AACH,aAFD;;AAIA,gBAAM,cAAc,SAAd,WAAc,CAAE,QAAF,EAAY,UAAZ,EAAwB,QAAxB,EAAsC;AACtD,qBAAK,GAAL,CAAU,UAAE,IAAF,EAAY;AAClB,yBAAK,MAAL,CAAa,QAAb;AACH,iBAFD;;AAIA,uBAAO,GAAP,CAAY,UAAE,IAAF,EAAY;AACpB,yBAAK,MAAL,CAAa,UAAb;AACH,iBAFD;;AAIA,qBAAK,GAAL,CAAU,UAAE,IAAF,EAAY;AAClB,yBAAK,MAAL,CAAa,QAAb;AACH,iBAFD;AAGH,aAZD;;AAcA,gBAAM,OAAO,SAAP,IAAO,CAAE,CAAF,EAAS;AAClB,uBAAO,IAAI,GAAJ,GAAY,IAAI,CAAJ,GAAQ,CAApB,GAA4B,CAAC,CAAD,GAAK,CAAE,IAAI,IAAI,CAAV,IAAgB,CAAxD;AACH,aAFD;;AAIA,gBAAM,SAAS,SAAS,cAAT,CAAyB,QAAzB,CAAf;AACA,gBAAM,WAAW,uBAAa;AAC1B,uBAAO,CADmB;AAE1B,qBAAK,OAAO,qBAAP,GAA+B,MAFV;AAG1B,0BAAU,kBAAE,QAAF,EAAgB;AACtB,wBAAI,WAAa,YAAc,CAAE,UAAU,SAAZ,IAA0B,CAA5B,GAAkC,KAAM,QAAN,CAA/D;AACA,wBAAI,aAAe,cAAgB,CAAE,YAAY,WAAd,IAA8B,CAAhC,GAAsC,KAAM,QAAN,CAAvE;AACA,wBAAI,WAAa,YAAc,CAAE,UAAU,SAAZ,IAA0B,CAA5B,GAAkC,KAAM,QAAN,CAA/D;AACA,gCAAa,QAAb,EAAuB,UAAvB,EAAmC,QAAnC;AACH;AARyB,aAAb,CAAjB;AAUH,SAxEE;;AA0EH,cAAM,gBAAM;AACR,iBAAK,gBAAL;AACH;AA5EE,KAAP;AA8EH,CA/EY,EAAb;;AAiFA,KAAK,IAAL","file":"index.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Emitter from './Emitter.js';\n\nclass Clock extends Emitter {\n    constructor() {\n        super();\n\n        this.running = false;\n        this._ticking = false;\n        this._startTime;\n        this._draw = this._draw.bind( this );\n    }\n\n    _draw( timeStamp ) {\n        this._ticking = false;\n\n        this.trigger( 'UPDATE' );\n        this.trigger( 'DRAW', timeStamp );\n\n        if( this._events.length ) {\n            this._raf = requestAnimationFrame( this._draw );\n        } else {\n            this.stop();\n        }\n    }\n\n    _requestTick() {\n        if( !this._ticking ) {\n            this._raf = requestAnimationFrame( this._draw );\n        }\n\n        this._ticking = true;\n    }\n\n    start() {\n        this.running = true;\n        this._requestTick();\n    }\n\n    stop() {\n        this.running = false;\n        cancelAnimationFrame( this._raf );\n    }\n};\n\nexport default Clock;\n","class Emitter {\n    constructor() {\n        this._events = {};\n    }\n\n    _hasEvent( eventName ) {\n        return eventName in this._events;\n    }\n\n    on( eventName, callBack ) {\n        if( this._hasEvent( eventName ) ) {\n            this._events[eventName].push( callBack );\n        } else {\n            this._events[eventName] = [ callBack ];\n        }\n\n        return this;\n    }\n\n    once( eventName, callBack ) {\n        this.on( eventName, { cb: callBack } );\n    }\n\n    off( eventName, callBack ) {\n        if( !this._hasEvent( eventName ) ) {\n            return this;\n        }\n\n        const index = this._events[eventName].indexOf( callBack );\n\n        if( index >= 0 ) {\n            this._events[eventName].splice( index, 1 );\n        }\n    }\n\n    trigger( eventName, data, onFinish = () => {} ) {\n        if( !this._hasEvent( eventName ) ) {\n            return;\n        }\n\n        this._events[eventName].map( ( callBack, idx ) => {\n            if( typeof callBack === 'object' ) {\n                callBack.cb( data );\n                this._events[eventName].splice( idx, 1 );\n            } else {\n                callBack( data );\n            }\n        });\n\n        onFinish();\n    }\n};\n\nexport default Emitter;\n","import Clock from './Clock.js';\nimport ScrollEmitter from './ScrollEmitter.js';\n\nclass Parallax {\n    constructor( { resolver, start, end } ) {\n        this._start = start;\n        this._end = end;\n        this._getDimensions();\n        this._ticking = false;\n        this._resolver = resolver;\n\n        window.clock = window.clock || new Clock();\n        window.scrollEmitter = window.scrollEmitter || new ScrollEmitter();\n\n        this._onScroll = this._onScroll.bind( this );\n        this._onUpdate = this._onUpdate.bind( this );\n        this._onDraw = this._onDraw.bind( this );\n\n        window.scrollEmitter.on( 'UPDATE', this._onScroll );\n    }\n\n    _getDimensions() {\n        // this.box = this.el.getBoundingClientRect();\n        this.windowHeight = window.outerHeight || window.innerHeight;\n        // this._start = Math.max( this.box.top - this.windowHeight, 0 );\n        // this._end = this.box.bottom;\n        this._from = 0;\n        this._to = 1;\n    }\n\n    _onScroll( scroll ) {\n        this._scroll = scroll;\n\n        if( this._inView() ) {\n\n            if( !window.clock.running ) {\n                window.clock.start();\n            }\n\n            if( !this._ticking ) {\n                window.clock.once( 'UPDATE', this._onUpdate );\n                window.clock.once( 'DRAW', this._onDraw );\n\n                this._ticking = true;\n            }\n        }\n    }\n\n    _onUpdate() {\n        // Calculate the value of our transform:\n        this.progress = ( this._from + ( ( this._to - this._from ) / ( this._end - this._start ) ) * ( this._scroll - this._start ) );\n    }\n\n    _onDraw( timeStamp ) {\n        // Do the transform:\n        this._resolver( this.progress );\n        this._ticking = false;\n    }\n\n    _inView() {\n        return ( this._scroll + this.windowHeight >= this._start ) && ( this._scroll <= this._end );\n    }\n};\n\nexport default Parallax;\n","import Emitter from './Emitter.js';\n\nclass ScrollEmitter extends Emitter {\n    constructor() {\n        super();\n        this._onScroll = this._onScroll.bind( this );\n        this._bindScrollListener();\n    }\n\n    _onScroll() {\n        this.trigger( 'UPDATE', window.scrollY );\n    }\n\n    _bindScrollListener() {\n        window.addEventListener( 'scroll', this._onScroll, false );\n    }\n};\n\nexport default ScrollEmitter;\n","import Parallax from './Parallax.js';\n\nconst main = ( () => {\n    return {\n        initHeroParallax: () => {\n            const SLOW_FROM = 0;\n            const SLOW_TO = -1000;\n            const MEDIUM_FROM = 0;\n            const MEDIUM_TO = -2000;\n            const FAST_FROM = 0;\n            const FAST_TO = -3000;\n\n            let slow_val;\n            let fast_val;\n            let medium_val;\n\n            const slowNodes = [].slice.apply( document.querySelectorAll( '[data-parallax-speed=slow]' ) );\n            const mediumNodes = [].slice.apply( document.querySelectorAll( '[data-parallax-speed=medium]' ) );\n            const fastNodes = [].slice.apply( document.querySelectorAll( '[data-parallax-speed=fast]' ) );\n            const slow = [];\n            const medium = [];\n            const fast = [];\n\n            class ParallaxItem {\n                constructor( node ) {\n                    this._node = node;\n                    this._style = this._node.style;\n                }\n\n                update( val ) {\n                    this._style.transform = `translate3d( 0, ${ val.toFixed( 2 ) }px, 0 )`\n                }\n            };\n\n            slowNodes.map( ( node ) => {\n                slow.push( new ParallaxItem( node ) );\n            });\n\n            mediumNodes.map( ( node ) => {\n                medium.push( new ParallaxItem( node ) );\n            });\n\n            fastNodes.map( ( node ) => {\n                fast.push( new ParallaxItem( node ) );\n            });\n\n            const updateItems = ( slowProg, mediumProg, fastProg ) => {\n                slow.map( ( item ) => {\n                    item.update( slowProg );\n                });\n\n                medium.map( ( item ) => {\n                    item.update( mediumProg );\n                });\n\n                fast.map( ( item ) => {\n                    item.update( fastProg );\n                });\n            };\n\n            const ease = ( t ) => {\n                return t < 0.5 ? ( 2 * t * t ) : ( -1 + ( 4 - 2 * t ) * t );\n            }\n\n            const header = document.getElementById( 'header' );\n            const parallax = new Parallax({\n                start: 0,\n                end: header.getBoundingClientRect().bottom,\n                resolver: ( progress ) => {\n                    let slow_val = ( SLOW_FROM + ( ( SLOW_TO - SLOW_FROM ) / 1 ) * ease( progress ) );\n                    let medium_val = ( MEDIUM_FROM + ( ( MEDIUM_TO - MEDIUM_FROM ) / 1 ) * ease( progress ) );\n                    let fast_val = ( FAST_FROM + ( ( FAST_TO - FAST_FROM ) / 1 ) * ease( progress ) );\n                    updateItems( slow_val, medium_val, fast_val );\n                }\n            });\n        },\n\n        init: () => {\n            main.initHeroParallax();\n        }\n    }\n})();\n\nmain.init();\n"]}